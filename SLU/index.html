<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-text-geometry-component@0.5.2/dist/aframe-text-geometry-component.min.js"></script>
    <title>Billiken-ARðŸš€</title>
  </head>
  <body>
    <a-scene
      mindar-image="imageTargetSrc: /tempBilli4.mind"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >
      <a-assets>
        <!-- <img
          id="card"
          src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/card.png"
        /> -->

        <!-- Replace this with your own model -->
        <a-asset-item
          id="customModel"
          src="/black_leather_chair.gltf"
        ></a-asset-item>

        <img id="customTexture" src="/cenBilli.png" />
        <img id="icon" src="/bill2.jpg" />
      </a-assets>

      <a-camera
        position="0 0 0"
        look-controls="enabled: false"
        cursor="rayOrigin: mouse; fuse: false;"
        raycaster="objects: .clickable; far: 100"
      ></a-camera>

      <!-- <a-entity
        camera
        cursor="rayOrigin: mouse"
        raycaster="objects: .clickable"
        position="0 0 0"
      ></a-entity> -->

      <a-entity
        mindar-image-target="targetIndex: 0"
        smooth="true"
        smoothCount="10"
        smoothTolerance="0.01"
        smoothThreshold="5"
      >
        <!-- <a-plane
          src="#card"
          position="0 0 0"
          height="0.552"
          width="1"
          rotation="0 0 0"
        ></a-plane> -->

        <!-- Custom model with animation -->
        <!-- <a-gltf-model
          id="model"
          src="#customModel"
          position="0 0 0.1"
          scale="0.3 0.3 0.3"
          rotation="90 0 0"
        ></a-gltf-model> -->

        <!-- Add 3D text -->
        <!-- <a-text
          value="Billiken Rocks!"
          position="0 0.5 0"
          rotation="0 0 0"
          align="center"
          color="blue"
          width="2"
          side="double"
        ></a-text> -->

        <a-entity raycaster="objects: .clickable" cursor></a-entity>

        <a-entity
          text-geometry="value: Higher Purpose. Greater good.; size: 0.16; height: 0.1; font: https://threejs.org/examples/fonts/optimer_bold.typeface.json"
          material="color: #003aa7"
          position="-0.455 -0.53 0"
          rotation="0 0 0"
          scale="0.3 0.3 0.3"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <a-entity
          text-geometry="value: Saint Louis University; size: 0.24; height: 0.1; font: https://threejs.org/examples/fonts/optimer_bold.typeface.json"
          material="color: #003aa7"
          position="-0.48 0.5 0"
          rotation="0 0 0"
          scale="0.3 0.3 0.3"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <!-- top -->
        <a-entity
          geometry="primitive: box; width: 1; height: 0.03; depth: 0.05"
          material="color: #003aa7"
          position="0 0.65 0"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <!-- bottom -->
        <a-entity
          geometry="primitive: box; width: 1; height: 0.03; depth: 0.05"
          material="color: #003aa7"
          position="0 -0.65 0"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <!-- left -->
        <a-entity
          geometry="primitive: box; width: 1.29; height: 0.03; depth: 0.05"
          material="color: #003aa7"
          position="-0.5 0 0"
          rotation="0 0 90"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <!-- right -->
        <a-entity
          geometry="primitive: box; width: 1.29; height: 0.03; depth: 0.05"
          material="color: #003aa7"
          position="0.5 0 0"
          rotation="0 0 90"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <a-entity
          id="menu-button"
          class="clickable"
          tap-listener
          geometry="primitive: circle; radius: 0.15"
          material="src: #customTexture; side: double"
          position="0 0 0"
          rotation="0 0 0"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <a-entity
          id="option1"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          visible="false"
        ></a-entity>
        <a-entity
          id="option2"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          visible="false"
        ></a-entity>
        <a-entity
          id="option3"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          visible="false"
        ></a-entity>
        <a-entity
          id="option4"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          visible="false"
        ></a-entity>
        <a-entity
          id="option5"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          visible="false"
        ></a-entity>
        <a-entity
          id="option6"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          visible="false"
        ></a-entity>
      </a-entity>
    </a-scene>

    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const center = document.querySelector("#menu-button");
        const options = [
          document.querySelector("#option1"),
          document.querySelector("#option2"),
          document.querySelector("#option3"),
          document.querySelector("#option4"),
          document.querySelector("#option5"),
          document.querySelector("#option6"),
        ];

        let menuVisible = false;
        const radius = 0.25;
        //const angles = [15, 75, 135, 195, 255, 315];
        const leftX=-0.3;
        const rightX=0.3;
        const anglesY=[0.15, 0, -0.15];

        const toggleMenu = () => {
          menuVisible = !menuVisible;

          options.forEach((opt, i) => {
            //const rad = THREE.MathUtils.degToRad(angles[i]);
            //const x = radius * Math.cos(rad);
            //const y = radius * Math.sin(rad);
            const isLeft = i < 3; // First 3 options are on the left
            const x = isLeft ? leftX : rightX; // Assign position based on left or right
            const y = anglesY[i % 3]; // Set Y for each option (top, middle, bottom)

            if (menuVisible) {
              opt.setAttribute("visible", true);
              opt.setAttribute("material", "opacity: 0");
              opt.setAttribute("position", "0 0 0");

              opt.setAttribute("animation__move", {
                property: "position",
                to: `${x} ${y} 0`,
                dur: 1000,
                easing: "easeOutElastic",
              });

              opt.setAttribute("animation__fade", {
                property: "material.opacity",
                to: 1,
                dur: 300,
              });
            } else {
              opt.setAttribute("animation__move", {
                property: "position",
                to: "0 0 0",
                dur: 300,
                easing: "easeInOutQuad",
              });

              opt.setAttribute("animation__fade", {
                property: "material.opacity",
                to: 0,
                dur: 200,
              });

              
              setTimeout(() => opt.setAttribute("visible", false), 300);
            }
          });
        };

        // Use 'mousedown' and 'mouseup' which A-Frame often maps to touch events
        center.addEventListener("mousedown", (event) => {
          console.log("Center button mousedown/touchstart");
          event.preventDefault();
        });

        center.addEventListener("mouseup", (event) => {
          console.log("Center button mouseup/touchend");
          event.preventDefault();
          toggleMenu();
        });

        const clickableElements = document.querySelectorAll(".clickable");
        clickableElements.forEach((element) => {
          element.addEventListener("mousedown", (event) => {
            console.log(
              `${element.id || element.className} mousedown/touchstart`
            );
            event.preventDefault();
          });
          element.addEventListener("mouseup", (event) => {
            console.log(`${element.id || element.className} mouseup/touchend`);
            event.preventDefault();
          });
        });
      });

      // document.addEventListener("DOMContentLoaded", () => {
      //   const center = document.querySelector("#menu-button");
      //   const options = [
      //     document.querySelector("#option1"),
      //     document.querySelector("#option2"),
      //     document.querySelector("#option3"),
      //     document.querySelector("#option4"),
      //     document.querySelector("#option5"),
      //     document.querySelector("#option6"),
      //   ];

      //   let menuVisible = false;

      //   const radius = 0.25; // distance from center
      //   const angles = [-60, -90, -120, 60, 90, 120]; // degrees for radial layout

      //   center.addEventListener("click", () => {
      //     menuVisible = !menuVisible;

      //     options.forEach((opt, i) => {
      //       opt.setAttribute("visible", menuVisible);
      //       if (menuVisible) {
      //         const rad = THREE.MathUtils.degToRad(angles[i]);
      //         const x = radius * Math.cos(rad);
      //         const y = radius * Math.sin(rad);
      //         opt.setAttribute("position", ${x} ${y} 0);
      //       }
      //     });
      //   });
      // });

      // const center = document.querySelector(".clickable");
      // center.addEventListener("click", (event) => {
      //   console.log("Am clicked");
      // });

      // document.addEventListener("DOMContentLoaded", function () {
      //   console.log("DOM fully loaded and parsed");
      //   // You can safely access and manipulate DOM elements here
      //   const center = document.querySelector("#menu-button");
      //   center.addEventListener("click", (event) => {
      //     console.log("Am clicked!");
      //   });
      // });
    </script>
  </body>
</html>
