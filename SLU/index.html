<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-text-geometry-component@0.5.2/dist/aframe-text-geometry-component.min.js"></script>
    <title>Billiken-ARðŸš€</title>
  </head>
  <body>
    <a-scene
      mindar-image="imageTargetSrc: /tempBilli4.mind; showStats: false; uiScanning: yes;"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >
      <a-assets>
        <!-- <img
          id="card"
          src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/card.png"
        /> -->

        <!-- Replace this with your own model -->
        <a-asset-item
          id="customModel"
          src="/black_leather_chair.gltf"
        ></a-asset-item>

        <img id="customTexture" src="/cenBilli2.png" />
        <img id="icon" src="/bill2.jpg" />
        <audio id="bg-music" src="/Dreamers.mp3" preload="auto"></audio>
      </a-assets>

      <a-camera
        position="0 0 0"
        look-controls="enabled: false"
        cursor="fuse: false; rayOrigin: mouse;"
        raycaster="far: 10000; objects: .clickable"
      >
      </a-camera>

      <a-entity
        mindar-image-target="targetIndex: 0"
        interactive-cube-manager
        smooth="true"
        smoothCount="10"
        smoothTolerance="0.01"
        smoothThreshold="5"
      >
        <!-- <a-plane
          src="#card"
          position="0 0 0"
          height="0.552"
          width="1"
          rotation="0 0 0"
        ></a-plane> -->

        <!-- Custom model with animation -->
        <!-- <a-gltf-model
          id="model"
          src="#customModel"
          position="0 0 0.1"
          scale="0.3 0.3 0.3"
          rotation="90 0 0"
        ></a-gltf-model> -->

        <!-- Add 3D text -->
        <!-- <a-text
          value="Billiken Rocks!"
          position="0 0.5 0"
          rotation="0 0 0"
          align="center"
          color="blue"
          width="2"
          side="double"
        ></a-text> -->

        <a-entity
          id="speaker"
          sound="src: #bg-music; autoplay: false; volume: 1"
          position="0 2 5"
        ></a-entity>

        <!-- <a-sound
          id="speaker"
          src="src: url(Dreamers.mp3)"
          position="0 2 5"
        ></a-sound> -->

        <a-entity raycaster="objects: .clickable" cursor></a-entity>

        <a-entity
          text-geometry="value: Higher Purpose. Greater good.; size: 0.16; height: 0.1; font: https://threejs.org/examples/fonts/optimer_bold.typeface.json"
          material="color: #003aa7"
          position="-0.455 -0.53 0"
          rotation="0 0 0"
          scale="0.3 0.3 0.3"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <a-entity
          text-geometry="value: Saint Louis University; size: 0.24; height: 0.1; font: https://threejs.org/examples/fonts/optimer_bold.typeface.json"
          material="color: #003aa7"
          position="-0.48 0.5 0"
          rotation="0 0 0"
          scale="0.3 0.3 0.3"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <!-- top -->
        <a-entity
          geometry="primitive: box; width: 1; height: 0.03; depth: 0.05"
          material="color: #003aa7"
          position="0 0.65 0"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <!-- bottom -->
        <a-entity
          geometry="primitive: box; width: 1; height: 0.03; depth: 0.05"
          material="color: #003aa7"
          position="0 -0.65 0"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <!-- left -->
        <a-entity
          geometry="primitive: box; width: 1.29; height: 0.03; depth: 0.05"
          material="color: #003aa7"
          position="-0.5 0 0"
          rotation="0 0 90"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <!-- right -->
        <a-entity
          geometry="primitive: box; width: 1.29; height: 0.03; depth: 0.05"
          material="color: #003aa7"
          position="0.5 0 0"
          rotation="0 0 90"
          smooth="true"
          smoothCount="10"
          smoothTolerance="0.01"
          smoothThreshold="5"
        ></a-entity>

        <a-sphere
          id="myInteractiveSphere"
          class="clickable"
          position="0 0 0"
          scale="0.15 0.15 0.05"
          material="src: #customTexture; repeat: 1 1; offset: 0 0"
          visible="false"
        >
        </a-sphere>
        <!-- LEFT side -->
        <a-entity
          id="option1"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          position="0 0 0"
          visible="false"
          animation__show="property: position; to: -0.3 0.2 0; dur: 600; easing: easeOutElastic; startEvents: show-option1"
          animation__hide="property: position; to: 0 0 0; dur: 600; easing: easeInOutQuad; startEvents: hide-option1"
        ></a-entity>

        <a-entity
          id="option2"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          position="0 0 0"
          visible="false"
          animation__show="property: position; to: -0.3 0 0; dur: 600; easing: easeOutElastic; startEvents: show-option2"
          animation__hide="property: position; to: 0 0 0; dur: 600; easing: easeInOutQuad; startEvents: hide-option2"
        ></a-entity>

        <a-entity
          id="option3"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          position="0 0 0"
          visible="false"
          animation__show="property: position; to: -0.3 -0.2 0; dur: 600; easing: easeOutElastic; startEvents: show-option3"
          animation__hide="property: position; to: 0 0 0; dur: 600; easing: easeInOutQuad; startEvents: hide-option3"
        ></a-entity>

        <!-- RIGHT side -->
        <a-entity
          id="option4"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          position="0 0 0"
          visible="false"
          animation__show="property: position; to: 0.3 0.2 0; dur: 600; easing: easeOutElastic; startEvents: show-option4"
          animation__hide="property: position; to: 0 0 0; dur: 600; easing: easeInOutQuad; startEvents: hide-option4"
        ></a-entity>

        <a-entity
          id="option5"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          position="0 0 0"
          visible="false"
          animation__show="property: position; to: 0.3 0 0; dur: 600; easing: easeOutElastic; startEvents: show-option5"
          animation__hide="property: position; to: 0 0 0; dur: 600; easing: easeInOutQuad; startEvents: hide-option5"
        ></a-entity>

        <a-entity
          id="option6"
          geometry="primitive: circle; radius: 0.05"
          material="src: #icon"
          position="0 0 0"
          visible="false"
          animation__show="property: position; to: 0.3 -0.2 0; dur: 600; easing: easeOutElastic; startEvents: show-option6"
          animation__hide="property: position; to: 0 0 0; dur: 600; easing: easeInOutQuad; startEvents: hide-option6"
        ></a-entity>

        <a-entity
          id="audio-toggle"
          class="clickable"
          geometry="primitive: circle; radius: 0.07"
          material="color: green; opacity: 0.8"
          position="0.3 0 0"
          visible="false"
        ></a-entity>
      </a-entity>
    </a-scene>

    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>

    <script>
      const popupIds = [
        "option1",
        "option2",
        "option3",
        "option4",
        "option5",
        "option6",
      ];

      let isExpanded = false;

      document.addEventListener("DOMContentLoaded", () => {
        const trigger = document.querySelector("#myInteractiveSphere");

        trigger.addEventListener("click", () => {
          popupIds.forEach((id) => {
            const el = document.querySelector(`#${id}`);
            if (!isExpanded) {
              el.setAttribute("visible", true);
              el.emit(`show-${id}`);
            } else {
              el.emit(`hide-${id}`);
            }
          });

          isExpanded = !isExpanded;
        });

        // Handle hiding after animation ends
        popupIds.forEach((id) => {
          const el = document.querySelector(`#${id}`);
          el.addEventListener("animationcomplete__hide", () => {
            if (!isExpanded) {
              el.setAttribute("visible", false);
            }
          });
        });
      });
    </script>
  </body>
</html>
